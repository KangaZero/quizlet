import{d as It,f as y,a as i,t as O,s as N,r as Et,c as Jt}from"../chunks/zc6g9EkH.js";import"../chunks/C2ww8-rl.js";import{o as Lt}from"../chunks/Cf-qHpLd.js";import{p as Rt,l as Qe,a as Mt,f as z,c as a,s as r,m as S,t as J,g as e,b as Bt,d as l,r as s,n as L,i as Tt,e as Le,h as Ft}from"../chunks/CD-9d_V8.js";import{i as I}from"../chunks/uy65MZih.js";import{g as tt,s as zt,i as Vt,e as Pe,a as Re,u as Wt,b as Ht,d as Yt}from"../chunks/CFbMuKRK.js";import{r as Me,s as rt,a as Gt,i as Kt,b as st,c as Xt,d as Zt}from"../chunks/DvYgYepq.js";import{R as ot,b as Be,A as at,a as lt,c as nt,d as it,e as ct,f as dt,g as Te}from"../chunks/C24YAfRH.js";import{i as er}from"../chunks/B_z3iM5V.js";import{t as R}from"../chunks/DwLo9lps.js";function tr($,n,_){l(n,1),_()}function rr($,n,_,E,V){l(n,!0),l(_,null),l(E,""),l(V,[{text:"",isCorrect:!0},{text:"",isCorrect:!1},{text:"",isCorrect:!1},{text:"",isCorrect:!1}])}function sr($,n,_){l(n,!1),l(_,null)}function or($,n,_,E,V,de,W){if(!e(n).trim()){R.error("Question text is required");return}const H=e(_).filter(M=>M.text.trim());if(H.length<2){R.error("At least two answer options are required");return}if(!H.some(M=>M.isCorrect)){R.error("At least one answer must be marked as correct");return}const X=e(E).length;e(V)?Wt({...e(V),question:e(n).trim(),answers:H,updatedAt:Date.now()}):Ht({id:`q${X}`,question:e(n).trim(),answers:H,createdAt:Date.now(),updatedAt:Date.now(),stats:{accuracy:0,attempts:0,correctCount:0,incorrectCount:0,lastUsed:0}}),l(de,!1),W()}function ar($,n){e(n).length<6&&l(n,[...e(n),{text:"",isCorrect:!1}])}function lr($,n,_){const E=$.target;l(n,parseInt(E.value,10)),l(_,1)}var nr=()=>{var $;return($=document.getElementById("fileInput"))==null?void 0:$.click()},ir=y("<!> <!>",1),cr=y("<!> <!> <!>",1),dr=y("<!> <!>",1),ur=y('<button class="cursor-pointer rounded-md bg-primary border px-4 py-2 text-primary-foreground transition-colors hover:bg-primary/90 hover:scale-105 active:scale-95">Add Question</button>'),vr=y('<div class="mb-2 flex items-center gap-2"><input type="checkbox" name="correctAnswer"/> <input type="text" class="flex-1 rounded-md border border-input bg-background px-3 py-2"/> <button class="cursor-pointer rounded-md border border-border p-2 text-muted-foreground hover:bg-muted hover:scale-105 active:scale-95" title="Remove answer option">×</button></div>'),pr=y('<button class="cursor-pointer hover:scale-105 active:scale-95 mt-2 inline-flex items-center text-sm text-primary hover:underline">+ Add answer option</button>'),_r=y('<div class="mb-6 rounded-lg border border-border p-6"><h2 class="mb-4 text-xl font-semibold"> </h2> <div class="mb-4"><label class="mb-1 block text-sm font-medium" for="question">Question</label> <textarea id="question" class="w-full rounded-md border border-input bg-background px-3 py-2" rows="3" placeholder="Enter your question"></textarea></div> <div class="mb-4"><label class="mb-1 block text-sm font-medium">Answer Options</label> <p class="mb-2 text-sm text-muted-foreground">Select the radio button for the correct answer(s).</p> <!> <!></div> <div class="flex justify-end gap-2"><button class="cursor-pointer rounded-md border border-border px-4 py-2 hover:bg-muted hover:scale-105 active:scale-95">Cancel</button> <button class="cursor-pointer rounded-md bg-primary px-4 py-2 border bg-green-200 text-green-400 dark:text-green-600 text-primary-foreground transition-colors hover:bg-primary/90 hover:scale-105 active:scale-95"> </button></div></div>'),mr=y('<div class="py-8 text-center"><p>Loading questions...</p></div>'),fr=y("<p>Try a different search term or clear your search.</p>"),br=y("<p>Start by adding your first question!</p>"),xr=y('<div class="rounded-lg border border-border p-8 text-center"><p class="mb-4">No questions found.</p> <!></div>'),hr=($,n)=>n("id"),gr=($,n)=>n("accuracy"),yr=($,n)=>n("attempts"),$r=($,n)=>n("lastUsed"),kr=($,n)=>n("question"),Ar=y("<li> </li>"),wr=($,n,_)=>n(e(_)),Cr=($,n)=>l(n,!0),Qr=y('<tr class="border-b border-border hover:bg-muted/50"><td class="px-4 py-3 text-sm"> </td><td class="px-4 py-3 text-sm"><!></td><td class="px-4 py-3 text-sm"> </td><td class="px-4 py-3 text-sm"><!></td><td class="px-4 py-3"> </td><td class="px-4 py-3"><ul class="list-inside list-disc space-y-1"></ul></td><td class="px-4 py-4 text-right"><button class="cursor-pointer hover:scale-95 active:scale-105 rounded-md min-w-[70px] border px-3 py-1 text-sm hover:bg-muted">Edit</button> <button class="cursor-pointer hover:scale-95 active:scale-105 rounded-md min-w-[70px] border bg-red-50 px-3 py-1 mt-2 text-sm text-red-600 hover:bg-red-100 dark:bg-red-900/30 dark:text-red-400 dark:hover:bg-red-900/50">Delete</button></td></tr>'),Pr=($,n,_)=>n(e(_)-1),Sr=y("<button></button>"),qr=y('<span class="px-1">...</span>'),Nr=($,n,_)=>n(e(_)+1),Dr=y(`<div class="mt-4 flex justify-center"><div class="flex items-center space-x-2"><button class="cursor-pointer rounded-md border border-border px-3 py-1 text-sm disabled:opacity-50">Previous</button> <!> <button class="cursor-pointer 
          rounded-md border border-border px-3 py-1 text-sm disabled:opacity-50">Next</button></div></div>`),Or=y('<div class="mb-4 flex items-center justify-between"><div class="text-sm text-muted-foreground"> </div> <div><label class="text-sm">Show <select class="rounded-md border border-input dark:bg-slate-600 px-2 py-1"><option>10</option><option>20</option><option>50</option><option>100</option></select> per page</label></div></div> <div class="rounded-lg border border-border"><div class="overflow-x-auto"><table class="w-full"><thead><tr class="border-b border-border bg-muted/50"><th class="px-4 py-3 text-left text-sm font-medium cursor-pointer select-none"> </th><th class="px-4 py-3 text-left text-sm font-medium cursor-pointer select-none"> </th><th class="px-4 py-3 text-left text-sm font-medium cursor-pointer select-none"> </th><th class="px-4 py-3 text-left text-sm font-medium cursor-pointer select-none"> </th><th class="px-4 py-3 text-left text-sm font-medium cursor-pointer select-none"> </th><th class="px-4 py-3 text-left text-sm font-medium">Answers</th><th class="px-4 py-3 text-right text-sm font-medium">Actions</th></tr></thead><tbody></tbody></table></div></div> <!>',1),Ur=y("<!> <!>",1),jr=y("<!> <!>",1),Ir=y("<!> <!>",1),Er=y('<div class="flex flex-row items-center justify-between mb-6"><h1 class="mb-6 text-2xl font-bold">Quiz Question Manager</h1> <div><button class="cursor-pointer rounded-md bg-primary border px-4 py-2 text-primary-foreground transition-colors hover:bg-primary/90 hover:scale-105 active:scale-95 mr-2">Export JSON</button> <button class="cursor-pointer rounded-md bg-primary border px-4 py-2 text-primary-foreground transition-colors hover:bg-primary/90 hover:scale-105 active:scale-95" title="Import questions from a JSON file">Import JSON</button></div> <input type="file" id="fileInput" accept=".json,application/json" class="hidden"/></div> <!> <div class="mb-6 flex flex-wrap items-center gap-4"><div class="flex-1"><div class="relative flex items-center"><input type="text" placeholder="Search questions..." class="w-full rounded-md border border-input bg-background px-3 py-2 pr-10"/></div></div> <!></div> <!> <!> <!>',1);function Hr($,n){Rt(n,!1);const _=S(),E=S(),V=S(),de=S();let W=S([]),H=S(!1),X=S(""),M=S(!1),C=S(1),U=S(20),Z=S([]),ue=S(!1),ve=S(!1),T=S("date"),B=S("desc"),ee=S(null),pe=S(""),k=S([{text:"",isCorrect:!0},{text:"",isCorrect:!1},{text:"",isCorrect:!1},{text:"",isCorrect:!1}]);Lt(()=>{me()});function _e(t){e(T)===t?l(B,e(B)==="asc"?"desc":"asc"):(l(T,t),l(B,t==="date"?"desc":"asc"))}function ut(){const t=tt(),o=JSON.stringify(t,null,2),c=new Blob([o],{type:"application/json"}),m=URL.createObjectURL(c),d=document.createElement("a");d.href=m,d.download=`quiz-questions-${new Date().toISOString().slice(0,10)}.json`,document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL(m),R.success("Questions exported successfully!")}function vt(t){const o=t.target;if(o.files&&o.files[0]){const c=o.files[0];if(c.type!=="application/json"&&!c.name.endsWith(".json")){R.error("Please select a valid JSON file.");return}const m=new FileReader;m.onload=d=>{var b;try{const x=(b=d.target)==null?void 0:b.result;if(l(Z,JSON.parse(x)),!(Array.isArray(e(Z))&&e(Z).every(A=>A.id&&A.question&&Array.isArray(A.answers)&&A.answers.every(u=>"text"in u&&"isCorrect"in u)))){R.error("The JSON file has an invalid format.");return}l(ue,!0)}catch(x){R.error("Error parsing JSON file."),console.error("Import error:",x)}},m.readAsText(c),o.value=""}}function Fe(t){try{Vt(e(Z),t),me(),l(ue,!1),t==="replace"?R.success(`Replaced all questions with ${e(Z).length} imported questions.`):R.success(`Added ${e(Z).length} questions to your collection.`)}catch(o){R.error("Error importing questions."),console.error("Import error:",o)}}function pt(){l(ue,!1)}function me(){l(H,!0),l(W,e(X)?zt(e(X)):tt()),l(H,!1)}function _t(t){for(l(M,!0),l(ee,t),l(pe,t.question),l(k,[...t.answers]);e(k).length<4;)e(k).push({text:"",isCorrect:!1})}function mt(t){Yt(t),me(),R.success(`Questions ${t} deleted successfully!`)}function ft(t){l(k,e(k).map((o,c)=>c===t?{...o,isCorrect:!o.isCorrect}:o))}function bt(t){e(k).length>2&&(l(k,e(k).filter((o,c)=>c!==t)),e(k).some(o=>o.isCorrect)||Ft(k,e(k)[0]={...e(k)[0],isCorrect:!0}))}function Se(t){l(C,t)}Qe(()=>e(W),()=>{l(_,e(W))}),Qe(()=>(e(_),e(U)),()=>{l(E,Math.ceil(e(_).length/e(U)))}),Qe(()=>(e(_),e(T),e(B)),()=>{l(V,[...e(_)].sort((t,o)=>{var d,b,x,Q,A,u;let c,m;switch(e(T)){case"id":c=t.id,m=o.id;break;case"accuracy":c=((d=t.stats)==null?void 0:d.accuracy)||0,m=((b=o.stats)==null?void 0:b.accuracy)||0;break;case"attempts":c=((x=t.stats)==null?void 0:x.attempts)||0,m=((Q=o.stats)==null?void 0:Q.attempts)||0;break;case"lastUsed":c=((A=t.stats)==null?void 0:A.lastUsed)||0,m=((u=o.stats)==null?void 0:u.lastUsed)||0;break;case"question":c=t.question.toLowerCase(),m=o.question.toLowerCase();break;case"date":default:c=t.updatedAt||t.createdAt,m=o.updatedAt||o.createdAt}return e(B)==="asc"?typeof c=="string"?c.localeCompare(String(m)):Number(c)-Number(m):typeof c=="string"?String(m).localeCompare(String(c)):Number(m)-Number(c)}))}),Qe(()=>(e(V),e(C),e(U)),()=>{l(de,e(V).slice((e(C)-1)*e(U),e(C)*e(U)))}),Mt(),er();var ze=Er(),qe=z(ze),Ne=r(a(qe),2),ge=a(Ne);ge.__click=ut;var xt=r(ge,2);xt.__click=[nr],s(Ne);var ht=r(Ne,2);ht.__change=vt,s(qe);var Ve=r(qe,2);ot(Ve,{get open(){return e(ue)},set open(t){l(ue,t)},children:(t,o)=>{at(t,{children:(c,m)=>{var d=dr(),b=z(d);lt(b,{children:(Q,A)=>{var u=ir(),h=z(u);nt(h,{children:(q,v)=>{L();var f=O("Import Questions");i(q,f)},$$slots:{default:!0}});var g=r(h,2);it(g,{children:(q,v)=>{L();var f=O();J(()=>N(f,`You're about to import ${e(Z).length??""} questions. How would you like to proceed?`)),i(q,f)},$$slots:{default:!0}}),i(Q,u)},$$slots:{default:!0}});var x=r(b,2);ct(x,{children:(Q,A)=>{var u=cr(),h=z(u);dt(h,{onclick:pt,children:(v,f)=>{L();var p=O("Cancel");i(v,p)},$$slots:{default:!0}});var g=r(h,2);Te(g,{class:"bg-amber-600 hover:bg-amber-700",onclick:()=>Fe("add"),children:(v,f)=>{L();var p=O("Add to Existing");i(v,p)},$$slots:{default:!0}});var q=r(g,2);Te(q,{class:"bg-red-600 hover:bg-red-700",onclick:()=>Fe("replace"),children:(v,f)=>{L();var p=O("Replace All");i(v,p)},$$slots:{default:!0}}),i(Q,u)},$$slots:{default:!0}}),i(c,d)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var De=r(Ve,2),Oe=a(De),We=a(Oe),Ue=a(We);Me(Ue),Ue.__input=[tr,C,me],s(We),s(Oe);var gt=r(Oe,2);{var yt=t=>{var o=ur();o.__click=[rr,M,ee,pe,k],i(t,o)};I(gt,t=>{e(M)||t(yt)})}s(De);var He=r(De,2);{var $t=t=>{var o=_r(),c=a(o),m=a(c,!0);s(c);var d=r(c,2),b=r(a(d),2);Et(b),s(d);var x=r(d,2),Q=r(a(x),4);Pe(Q,1,()=>e(k),Re,(f,p,ae)=>{var te=vr(),re=a(te);Me(re),re.__change=()=>ft(ae);var se=r(re,2);Me(se),rt(se,"placeholder",`Answer option ${ae+1}`);var le=r(se,2);le.__click=()=>bt(ae),s(te),J(()=>{Gt(re,e(p).isCorrect),le.disabled=e(k).length<=2}),Be(se,()=>e(p).text,ye=>(e(p).text=ye,Tt(()=>e(k)))),i(f,te)});var A=r(Q,2);{var u=f=>{var p=pr();p.__click=[ar,k],i(f,p)};I(A,f=>{e(k).length<6&&f(u)})}s(x);var h=r(x,2),g=a(h);g.__click=[sr,M,ee];var q=r(g,2);q.__click=[or,pe,k,W,ee,M,me];var v=a(q);s(q),s(h),s(o),J(()=>{N(m,e(ee)?"Edit Question":"Add New Question"),N(v,`${e(ee)?"Update":"Save"} Question`)}),Be(b,()=>e(pe),f=>l(pe,f)),i(t,o)};I(He,t=>{e(M)&&t($t)})}var Ye=r(He,2);{var kt=t=>{var o=mr();i(t,o)},At=(t,o)=>{{var c=d=>{var b=xr(),x=r(a(b),2);{var Q=u=>{var h=fr();i(u,h)},A=u=>{var h=br();i(u,h)};I(x,u=>{e(X)?u(Q):u(A,!1)})}s(b),i(d,b)},m=d=>{var b=Or(),x=z(b),Q=a(x),A=a(Q);s(Q);var u=r(Q,2),h=a(u),g=r(a(h));g.__change=[lr,U,C],Kt(g,()=>e(U));var q,v=a(g);v.value=v.__value="10";var f=r(v);f.value=f.__value="20";var p=r(f);p.value=p.__value="50";var ae=r(p);ae.value=ae.__value="100",s(g),L(),s(h),s(u),s(x);var te=r(x,2),re=a(te),se=a(re),le=a(se),ye=a(le),$e=a(ye);$e.__click=[hr,_e];var Qt=a($e);s($e);var ke=r($e);ke.__click=[gr,_e];var Pt=a(ke);s(ke);var Ae=r(ke);Ae.__click=[yr,_e];var St=a(Ae);s(Ae);var we=r(Ae);we.__click=[$r,_e];var qt=a(we);s(we);var je=r(we);je.__click=[kr,_e];var Nt=a(je);s(je),L(2),s(ye),s(le);var Ge=r(le);Pe(Ge,5,()=>e(de),F=>F.id,(F,D)=>{var ne=Qr(),oe=a(ne),Ce=a(oe,!0);s(oe);var ie=r(oe),Ie=a(ie);{var Ke=P=>{var w=O();J(K=>N(w,`${K??""}%`),[()=>(e(D).stats.accuracy*100).toFixed(1)],Le),i(P,w)},j=P=>{var w=O("-");i(P,w)};I(Ie,P=>{var w;((w=e(D).stats)==null?void 0:w.accuracy)!==void 0?P(Ke):P(j,!1)})}s(ie);var ce=r(ie),Ee=a(ce,!0);s(ce);var fe=r(ce),Je=a(fe);{var Y=P=>{var w=O();J(K=>N(w,K),[()=>new Date(e(D).stats.lastUsed).toLocaleDateString()],Le),i(P,w)},G=P=>{var w=O("Never");i(P,w)};I(Je,P=>{var w;(w=e(D).stats)!=null&&w.lastUsed?P(Y):P(G,!1)})}s(fe);var be=r(fe),xe=a(be,!0);s(be);var he=r(be),Xe=a(he);Pe(Xe,5,()=>e(D).answers,Re,(P,w)=>{var K=Ar(),jt=a(K);s(K),J(()=>{st(K,1,Xt(e(w).isCorrect?"font-semibold":"")),N(jt,`${e(w).text??""} ${e(w).isCorrect?"✓":""}`)}),i(P,K)}),s(Xe),s(he);var Ze=r(he),et=a(Ze);et.__click=[wr,_t,D];var Ut=r(et,2);Ut.__click=[Cr,ve],s(Ze),s(ne),J(()=>{var P;N(Ce,e(D).id),N(Ee,((P=e(D).stats)==null?void 0:P.attempts)||0),N(xe,e(D).question)}),i(F,ne)}),s(Ge),s(se),s(re),s(te);var Dt=r(te,2);{var Ot=F=>{var D=Dr(),ne=a(D),oe=a(ne);oe.__click=[Pr,Se,C];var Ce=r(oe,2);Pe(Ce,1,()=>Array(e(E)),Re,(Ie,Ke,j)=>{var ce=Jt(),Ee=z(ce);{var fe=Y=>{var G=Sr();G.__click=()=>Se(j+1),G.textContent=j+1,J(()=>st(G,1,`cursor-pointer rounded-md border px-3 py-1 text-sm ${e(C)===j+1?"border-primary bg-primary/10":"border-border hover:bg-muted"}`)),i(Y,G)},Je=(Y,G)=>{{var be=xe=>{var he=qr();i(xe,he)};I(Y,xe=>{(j+1===e(C)-2||j+1===e(C)+2)&&xe(be)},G)}};I(Ee,Y=>{j+1===e(C)||j+1===1||j+1===e(E)||j+1>=e(C)-1&&j+1<=e(C)+1?Y(fe):Y(Je,!1)})}i(Ie,ce)});var ie=r(Ce,2);ie.__click=[Nr,Se,C],s(ne),s(D),J(()=>{oe.disabled=e(C)===1,ie.disabled=e(C)===e(E)}),i(F,D)};I(Dt,F=>{e(E)>1&&F(Ot)})}J(F=>{N(A,`Showing ${(e(C)-1)*e(U)+1} to ${F??""} of ${e(_).length??""} questions`),q!==(q=e(U))&&(g.value=(g.__value=e(U))??"",Zt(g,e(U))),N(Qt,`ID ${e(T)==="id"?e(B)==="asc"?"↑":"↓":""}`),N(Pt,`Accuracy ${e(T)==="accuracy"?e(B)==="asc"?"↑":"↓":""}`),N(St,`Attempts ${e(T)==="attempts"?e(B)==="asc"?"↑":"↓":""}`),N(qt,`Last Used ${e(T)==="lastUsed"?e(B)==="asc"?"↑":"↓":""}`),N(Nt,`Question ${e(T)==="question"?e(B)==="asc"?"↑":"↓":""}`)},[()=>Math.min(e(C)*e(U),e(_).length)],Le),i(d,b)};I(t,d=>{e(de).length===0?d(c):d(m,!1)},o)}};I(Ye,t=>{e(H)?t(kt):t(At,!1)})}var wt=r(Ye,2);{var Ct=t=>{ot(t,{get open(){return e(ve)},set open(o){l(ve,o)},children:(o,c)=>{at(o,{children:(m,d)=>{var b=Ir(),x=z(b);lt(x,{children:(A,u)=>{var h=Ur(),g=z(h);nt(g,{children:(v,f)=>{L();var p=O("Delete Question");i(v,p)},$$slots:{default:!0}});var q=r(g,2);it(q,{children:(v,f)=>{L();var p=O("Are you sure you want to delete this question? This action cannot be undone.");i(v,p)},$$slots:{default:!0}}),i(A,h)},$$slots:{default:!0}});var Q=r(x,2);ct(Q,{children:(A,u)=>{var h=jr(),g=z(h);dt(g,{onclick:()=>l(ve,!1),children:(v,f)=>{L();var p=O("Cancel");i(v,p)},$$slots:{default:!0}});var q=r(g,2);Te(q,{class:"bg-red-600 hover:bg-red-700",onclick:()=>{var v;return mt(((v=e(ee))==null?void 0:v.id)||"")},children:(v,f)=>{L();var p=O("Delete");i(v,p)},$$slots:{default:!0}}),i(A,h)},$$slots:{default:!0}}),i(m,b)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})};I(wt,t=>{e(ve)&&t(Ct)})}J(()=>{ge.disabled=e(W).length===0,rt(ge,"title",e(W).length===0?"No questions to export":"Export all questions as JSON")}),Be(Ue,()=>e(X),t=>l(X,t)),i($,ze),Bt()}It(["click","change","input"]);export{Hr as component};
